/* ==========================================================================
   1. CORE HEADER & TOP BAR
   ========================================================================== */
.top-bar {
    background: var(--fsu-garnet);
    color: var(--white);
    padding: 8px 5%;
    font-size: 0.8rem;
    display: flex;
    justify-content: center;
}

.top-bar a { 
    color: var(--fus-gold); 
    text-decoration: none; 
    font-weight: 700; 
}

header {
    background: var(--white);
    padding: 1rem 5%;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-bottom: 1px solid #e2e8f0;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    /* Essential for submenu visibility */
    overflow: visible !important; 
}

.logo-text {
    font-family: 'Playfair Display', serif;
    font-size: 1.3rem;
    color: var(--fsu-black);
    text-decoration: none;
    font-weight: 800;
    margin-bottom: 10px;
}
.logo-text span { color: var(--fsu-gold); }

/* ==========================================================================
   2. SHARED NAVIGATION BASE
   ========================================================================== */
nav ul { 
    list-style: none; 
    display: flex; 
    padding: 0;
    margin: 0;
}

nav ul li {
    position: relative;
}

nav a { 
    text-decoration: none; 
    color: var(--slate); 
    font-weight: 600; 
    text-transform: uppercase;
    white-space: nowrap;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
}

/* Submenu Base Styles */
.submenu {
    display: none;
    position: absolute;
    background-color: var(--white);
    min-width: 200px;
    box-shadow: 0 8px 15px rgba(0,0,0,0.1);
    border-top: 3px solid var(--fsu-gold);
    list-style: none;
    padding: 10px 0;
    z-index: 1000;
}

.submenu li a {
    padding: 10px 20px;
    display: block;
    color: var(--navy-dark);
    text-transform: none; 
    font-size: 0.9rem;
}

/* ==========================================================================
   3. MOBILE NAVIGATION (< 768px)
   ========================================================================== */
@media (max-width: 767px) {
    nav {
        width: 100vw;
        margin-left: calc(-50vw + 50%);
        overflow-x: auto; 
        overflow-y: visible;
        scrollbar-width: none; 
        -ms-overflow-style: none;
    }
    nav::-webkit-scrollbar { display: none; }

    nav ul {
        justify-content: flex-start;
        gap: 22px;
        padding: 10px 20px;
    }

    nav a { font-size: 0.9rem; }

    /* Floating Submenu for Mobile */
    li.is-active .submenu {
        display: block !important;
        position: fixed; /* Breaks out of the scrollable nav container */
        
        /* Position it right under the header */
        /* If your header is 100px tall, set 'top' to 100px */
        top: 130px; 
        
        left: 50%;
        transform: translateX(-50%);
        
        width: 90vw; /* Almost full width of screen */
        max-width: 320px;
        background: var(--white);
        z-index: 99999; /* High enough to float over the Hero */
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        border-top: 3px solid var(--fsu-gold);
    }

        /* The Arrow - Appears only on items with submenus (add .dropdown class to LI) */
    li.dropdown > a::after {
        content: '';
        width: 6px;
        height: 6px;
        margin-left: 8px;
        border-right: 2px solid var(--fsu-gold);
        border-bottom: 2px solid var(--fsu-gold);
        transform: rotate(45deg);
        transition: transform 0.3s ease;
        position: relative;
        top: -2px; /* Perfect vertical alignment nudge */
    }

    li.is-active > a::after {
        transform: rotate(225deg);
        top: 1px; /* Adjust nudge for inverted arrow */
    }
}

/* ==========================================================================
   4. TABLET & DESKTOP (> 768px)
   ========================================================================== */
@media (min-width: 768px) {
    .top-bar { justify-content: flex-end; padding: 8px 8%; }
    header { flex-direction: row; justify-content: space-between; padding: 1rem 8%; }
    .logo-text { margin-bottom: 0; font-size: 1.5rem; }
    nav ul { gap: 25px; }
    nav a { font-size: 0.85rem; }
    
    /* Desktop Hover */
    nav ul li:hover .submenu { display: block; }
    .submenu { left: 50%; transform: translateX(-50%); }

    /* Main Nav Links */
    nav ul li a:hover {
        color: var(--fsu-gold, #d4af37); /* Fallback to gold hex if variable fails */
        opacity: 0.8;
    }

    /* Submenu Link Hover */
    .submenu li a:hover {
        background-color: var(--bg-light, #f8f9fa);
        color: var(--fsu-gold, #d4af37) !important;
        padding-left: 25px; /* Subtle slide effect on hover */
        transition: all 0.2s ease;
    }

    /* Parent highlight when Submenu is open */
    li.is-active > a, 
    li:hover > a {
        color: var(--fsu-gold, #d4af37);
    }
}

/* ==========================================================================
   5. INTERACTION & ARROW LOGIC
   ========================================================================== */

/* JS Toggle State: Show Menu */
li.is-active .submenu { 
    display: block !important; 
}

/* Active Page Highlights */
nav ul li a.active {
    color: var(--fsu-gold);
    border-bottom: 2px solid var(--fsu-gold);
}

.submenu li a.active {
    background-color: var(--fsu-gold);
    color: var(--fsu-garnet) !important;
    padding-left: 25px; /* Indent active sub-link */
}